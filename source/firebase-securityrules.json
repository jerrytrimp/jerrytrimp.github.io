{
  "rules": {
    ".read": true,
    ".write": "auth !== null",

    "Destinations":{
      ".validate": "newData.hasChildren(['id', 'title', 'fromDate', 'toDate', 'coverphotolink', 'coverphotoposition', 'addedBy'])",

      "id":{
        //number > 0
        //not null

        ".validate": "newData.isNumber() && newData.val() > 0"
      },
      "title":{
        //string
        //minlength 4
        //maxlength 20
        //not null
        ".validate": "newData.isString() && newData.val().length > 4 && newData.val().length < 20"
      },
      "fromDate":{
        //date format: dd-mm-yyyy
        //not null
        ".validate": "newData.isString() && newData.val().matches(/^(19|20)[0-9][0-9][-\\/. ](0[1-9]|1[012])[-\\/. ](0[1-9]|[12][0-9]|3[01])$/)"
      },
      "toDate":{
        //date format: dd-mm-yyyy between 1900 and 2099
        //not null
        ".validate": "newData.isString() && newData.val().matches(/^(19|20)[0-9][0-9][-\\/. ](0[1-9]|1[012])[-\\/. ](0[1-9]|[12][0-9]|3[01])$/)"
      },
      "coverphotolink":{
        //url
        //string
        //not null
        ".validate": "newData.isString() && newData.val().length > 0 && newData.val().matches(/^(ht|f)tp(s?):\\/\\/[0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*((0-9)*)*(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\'\\/\\\\+&=%\\$#_]*)?$/)"
      },
      "coverphotoposition":{
        //not null
        //string, one of :
        /*
        image-top-left,
        image-top-center,
        image-top-right,
        image-center-left,
        image-center-center,
        image-center-right,
        image-bottom-left,
        image-bottom-center,
        image-bottom-right
        */
        ".validate": "newData.isString() &&
        newData.val().toLowerCase() == 'image-top-left'
        || newData.val().toLowerCase() == 'image-top-center'
        || newData.val().toLowerCase() == 'image-top-right'
        || newData.val().toLowerCase() == 'image-center-left'
        || newData.val().toLowerCase() == 'image-center-center'
        || newData.val().toLowerCase() == 'image-center-right'
        || newData.val().toLowerCase() == 'image-bottom-left'
        || newData.val().toLowerCase() == 'image-bottom-center'
        || newData.val().toLowerCase() == 'image-bottom-right'"

      },
      "addedBy":{
        //email address
        //not null
        ".validate": "newData.val().length >= 0 && newData.isString() && newData.val().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i)"
      }
    }
  ,

    "Visited_places":
    {
      ".validate": "newData.hasChildren(['id', 'destinationId', 'title', 'description','addedBy'])",

      "id":{
        //number > 0
        //not null
        ".validate": "newData.isNumber() && newData.val() > 0"
      },
      "destinationId":{
        //number > 0
        //not null
        //extists in destinations
        ".validate": "newData.isNumber() && newData.val() > 0"
      },
      "title":{
        //string
        //minlength 4
        //maxlength 20
        //not null
        ".validate": "newData.isString() && newData.val().length > 4 && newData.val().length < 20"
      },
      "description":{
        //string
        //minlength 150
        //not null
        ".validate": "newData.isString() && newData.val().length >= 150"
      },
      "addedBy":{
        //email address
        //not null
        ".validate": "newData.val().length >= 0 && newData.isString() && newData.val().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i)"
      }
    },

    "Photos":{

      ".validate": "newData.hasChildren(['id', 'visitedPlaceId', 'title', 'link', 'position', 'addedBy'])",
      "id":{
        //number > 0
        //not null
        ".validate": "newData.isNumber() && newData.val() > 0"
      },
      "visitedPlaceId":{
        //number > 0
        //not null
        //extists in visited_places
        ".validate": "newData.isNumber() && newData.val() > 0"
      },
      "title":{
        //string
        //minlength 4
        //maxlength 20
        //not null
        ".validate": "newData.isString() && newData.val().length > 4 && newData.val().length < 20"
      },
      "link":{
        //url
        //string
        //not null
        ".validate": "newData.isString() && newData.val().length > 0 && newData.val().matches(/^(ht|f)tp(s?):\\/\\/[0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*((0-9)*)*(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\'\\/\\\\+&=%\\$#_]*)?$/)"
      },
      "position":{
        //not null
        //string, one of :
        /*
        image-top-left,
        image-top-center,
        image-top-right,
        image-center-left,
        image-center-center,
        image-center-right,
        image-bottom-left,
        image-bottom-center,
        image-bottom-right
        */
        ".validate": "newData.isString() &&
        newData.val().toLowerCase() == 'image-top-left'
        || newData.val().toLowerCase() == 'image-top-center'
        || newData.val().toLowerCase() == 'image-top-right'
        || newData.val().toLowerCase() == 'image-center-left'
        || newData.val().toLowerCase() == 'image-center-center'
        || newData.val().toLowerCase() == 'image-center-right'
        || newData.val().toLowerCase() == 'image-bottom-left'
        || newData.val().toLowerCase() == 'image-bottom-center'
        || newData.val().toLowerCase() == 'image-bottom-right'"

      },
      "addedBy":{
        //email address
        //not null
        ".validate": "newData.val().length >= 0 && newData.isString() && newData.val().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i)"
      }
    }

  }
}